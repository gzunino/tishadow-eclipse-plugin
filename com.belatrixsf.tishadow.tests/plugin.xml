<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<plugin>

   <extension
         point="org.eclipse.debug.core.launchConfigurationTypes">
      <launchConfigurationType
            delegate="com.belatrixsf.tishadow.tests.LaunchTiShadowTests"
            id="com.belatrixsf.tishadow.tests.launchTiShadowTests"
            modes="run"
            name="TiShadow Tests">
      </launchConfigurationType>
      <launchConfigurationType
            delegate="com.belatrixsf.tishadow.server.LaunchTiShadowServer"
            id="com.belatrixsf.tishadow.server.launchTiShadowServer"
            modes="run"
            name="TiShadow Server">
      </launchConfigurationType>
   </extension>
   <extension
         point="org.eclipse.debug.ui.launchConfigurationTabGroups">
      <launchConfigurationTabGroup
            class="com.belatrixsf.tishadow.tests.LaunchTiShadowTestsTabGroup"
            id="com.belatrixsf.tishadow.tests.launchTiShadowTestsTabGroup"
            type="com.belatrixsf.tishadow.tests.launchTiShadowTests">
      </launchConfigurationTabGroup>
      <launchConfigurationTabGroup
            class="com.belatrixsf.tishadow.server.LaunchTiShadowServerTabGroup"
            id="com.belatrixsf.tishadow.server.launchTiShadowServerTabGroup"
            type="com.belatrixsf.tishadow.server.launchTiShadowServer">
      </launchConfigurationTabGroup>
   </extension>
   <extension
         point="org.eclipse.debug.ui.launchConfigurationTypeImages">
      <launchConfigurationTypeImage
            configTypeID="com.belatrixsf.tishadow.tests.launchTiShadowTests"
            icon="icons/tishadow_16.png"
            id="com.belatrixsf.tishadow.tests.launchTiShadowTestsImage">
      </launchConfigurationTypeImage>
      <launchConfigurationTypeImage
            configTypeID="com.belatrixsf.tishadow.server.launchTiShadowServer"
            icon="icons/tishadow-server_16.png"
            id="com.belatrixsf.tishadow.server.launchTiShadowServerImage">
      </launchConfigurationTypeImage>
   </extension>
   <extension
         point="org.eclipse.debug.ui.launchShortcuts">
      <shortcut
            class="com.belatrixsf.tishadow.tests.LaunchShortcut"
            description="Run Jasmine specs on this project and shows results in JUnit View"
            icon="icons/tishadow_16.png"
            id="com.belatrixsf.tishadow.tests.launchTiShadowTestsShortcut"
            label="TiShadow Tests"
            modes="run">
         <contextualLaunch>
            <enablement>true</enablement>
            <contextLabel
                  label="Run TiShadow Tests"
                  mode="run">
            </contextLabel>
         </contextualLaunch>
      </shortcut>
   </extension>
   <extension
         point="org.eclipse.ui.newWizards">
      <category
            id="com.belatrixsf.tishadow.app"
            name="TiShadow">
      </category>
      <wizard
            canFinishEarly="false"
            category="com.belatrixsf.tishadow.app"
            class="com.belatrixsf.tishadow.app.wizards.ApplicationTiShadowWizard"
            icon="icons/tishadow.png"
            id="com.belatrixsf.tishadow.app.wizards.BaseProjectWizardController"
            name="TiShadow App Creation"
            project="true">
      </wizard>
      <wizard
            canFinishEarly="false"
            category="com.belatrixsf.tishadow.app"
            class="com.belatrixsf.tishadow.app.wizards.AppifyTiShadowWizard"
            icon="icons/tishadow.png"
            id="com.belatrixsf.tishadow.app.wizards.AppifyWizardController"
            name="TiShadow Appify Creation (Creates a TI app)"
            project="true">
      </wizard>
   </extension>
   <extension
         point="org.eclipse.ui.menus">
      <menuContribution
            allPopups="true"
            locationURI="toolbar:org.eclipse.ui.main.toolbar?after=additions">
         <toolbar
               id="com.belatrixsf.tishadow.tests.tishadowToolbar"
               label="TiShadow Toolbar">
            <command
                  commandId="com.belatrixsf.tishadow.tests.runServer"
                  icon="icons/tishadow-server-run_16.png"
                  label="TS start server"
                  style="push"
                  tooltip="Starts the TiShadow server on the configured port.">
               <visibleWhen
                     checkEnabled="false">
                  <test
                        forcePluginActivation="true"
                        property="com.belatrixsf.tishadow.tests.serverRunning"
                        value="false">
                  </test>
               </visibleWhen>
            </command>
            <command
                  commandId="com.belatrixsf.tishadow.tests.runServer"
                  icon="icons/tishadow-server-stop_16.png"
                  label="TS stop server"
                  style="push"
                  tooltip="Stops the TiShadow server on the configured port.">
               <visibleWhen
                     checkEnabled="false">
                  <test
                        forcePluginActivation="true"
                        property="com.belatrixsf.tishadow.tests.serverRunning"
                        value="true">
                  </test>
               </visibleWhen>
            </command>
         </toolbar>
      </menuContribution>
   </extension>
   <extension
         point="org.eclipse.ui.commands">
      <command
            defaultHandler="com.belatrixsf.tishadow.handlers.RunServer"
            id="com.belatrixsf.tishadow.tests.runServer"
            name="Run TiShadow Server">
      </command>
      <command
            defaultHandler="com.belatrixsf.tishadow.handlers.RunTest"
            id="com.belatrixsf.tishadow.tests.runTest"
            name="Run TiShadow Tests">
      </command>
   </extension>
   <extension
         point="org.eclipse.core.expressions.propertyTesters">
      <propertyTester
            class="com.belatrixsf.tishadow.tests.tester.ServerTester"
            id="com.belatrixsf.tishadow.tests.serverTester"
            namespace="com.belatrixsf.tishadow.tests"
            properties="serverRunning"
            type="java.lang.Object">
      </propertyTester>
   </extension>

</plugin>
